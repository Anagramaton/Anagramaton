<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ANAGRAMATON</title>

  <!-- Fonts and CSS -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Coiny&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="modal.css" />
  <link rel="stylesheet" href="mobile.css" media="(max-width: 768px)" />
</head>

<body>
  <h1 id="game-title">ANAGRAMATON</h1>

  <main id="game-container">
    <svg id="hex-grid" width="100%" height="100%" viewBox="0 0 1000 1000" aria-label="Letter hex grid"></svg>
  </main>

  <button id="howto-open" type="button" aria-haspopup="dialog" aria-controls="howto-modal" aria-label="Open how to play">?</button>

  <!-- Submit Area -->
  <div id="submit-area" aria-live="polite">
    <div id="current-word-display">
      CURRENT WORD: <span id="current-word"></span>
    </div>

    <div id="controls">
      <button id="submit-word" type="button">SUBMIT</button>
      <span id="score-display">SCORE: 0</span>
      <button id="clear-word" type="button">CLEAR WORD</button>
    </div>
  </div>

  <div id="top-toggle-row">
    <button id="toggle-left" class="side-toggle left-toggle" type="button" aria-controls="left-panel" aria-expanded="false" aria-label="Toggle word panel">WORD PANEL</button>
    <button id="toggle-right" class="side-toggle right-toggle" type="button" aria-controls="right-panel" aria-expanded="false" aria-label="Toggle phrase panel">PHRASE PANEL</button>
  </div>

  <div id="backdrop" class="backdrop"></div>

  <!-- Left Panel -->
  <aside id="left-panel" aria-labelledby="left-panel-title">
    <div class="panel-content">
      <h2 id="left-panel-title">WORD PANEL</h2>

      <ul id="word-list" aria-live="polite"></ul>

      <div class="panel-actions">
        <button id="submit-list" type="button">SUBMIT LIST</button>
        <button id="new-game" type="button">NEW GAME</button>
      </div>
    </div>
  </aside>

  <!-- Right Panel -->
  <aside id="right-panel" aria-labelledby="right-panel-title">
    <div class="panel-content">
      <h2 id="right-panel-title">PHRASE FINDER PANEL</h2>

      <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
        <span id="hints-used">HINTS: 3/3</span>
        <span id="bonus-multi">MULTIPLIER: x3</span>
      </div>

      <hr />

      <!-- Phrase 1 -->
      <section style="margin-bottom: 15px;">
        <div>
          HINT 1: <span id="phrase1-hint1">???</span>
          <button id="phrase1-hint1-btn" type="button">HINT 1</button>
        </div>
        <hr />
        <div>
          PHRASE 1: <span id="phrase1-text">???</span>
        </div>
        <div id="phrase1-layout" style="margin-top:5px; font-weight:bold;"></div>
      </section>

      <!-- Word Count -->
      <div style="margin-bottom: 15px; text-align: center;">
        <button id="wordcount-hint" type="button">WORD COUNT</button>
      </div>

      <!-- Phrase 2 -->
      <section style="margin-bottom: 15px;">
        <div>
          PHRASE 2: <span id="phrase2-text">???</span>
        </div>
        <div id="phrase2-layout" style="margin-top:5px; font-weight:bold;"></div>
        <hr />
        <div>
          HINT 1: <span id="phrase2-hint1">???</span>
          <button id="phrase2-hint1-btn" type="button">HINT 1</button>
        </div>
      </section>
    </div>
  </aside>

  <!-- Round Over Modal -->
  <div id="round-over-modal" class="rom rom--hidden" role="dialog" aria-modal="true" aria-labelledby="rom-title">
    <div class="rom__backdrop"></div>
    <div class="rom__dialog">
      <h2 id="rom-title">YOU MADE IT!</h2>

      <p><strong>FINAL SCORE:</strong> <span id="rom-total">0</span></p>
      <p class="rom__sub">BASE <span id="rom-base">0</span> + BONUS <span id="rom-bonus">0</span></p>

      <!-- Words vs Board + Progress Bar are injected by JS just above the actions -->

      <div class="rom__actions">
        <button id="rom-close-btn" type="button">CLOSE</button>
      </div>
    </div>
  </div>

  <!-- How To Modal -->
  <div id="howto-modal" class="rom rom--hidden" role="dialog" aria-modal="true" aria-labelledby="howto-title">
    <div class="rom__backdrop"></div>
    <div class="rom__dialog" style="max-width: 640px;">
      <h2 id="howto-title">How to Play</h2>

      <!-- Pages -->
      <div id="howto-pagewrap" style="min-height:220px; margin:10px 0 16px;">

        <!-- PAGE 1 — Objective -->
        <section class="howto-page" data-page="0">
          <h3 style="margin:0 0 8px;">PAGE 1 — OBJECTIVE</h3>
          <ul>
            <li>Build and submit a list of the highest scoring words you can find.</li>
            <li>Build valid words by clicking adjacent tiles and submitting them to your list.</li>
            <li>No timer, no rush. Add or remove words as you like.</li>
          </ul>
        </section>

        <!-- PAGE 2 — Building -->
        <section class="howto-page" data-page="1" hidden>
          <h3 style="margin:0 0 8px;">PAGE 2 — BUILDING</h3>
          <ul>
            <li>Each word must be at least 4 letters.</li>
            <li>Each tile in a valid word must be adjacent to the one that came before.</li>
            <li>Each tile can only be used once per word.</li>
          </ul>
        </section>

        <!-- PAGE 3 — Bonus Multipliers -->
        <section class="howto-page" data-page="2" hidden>
          <h3 style="margin:0 0 8px;">PAGE 3 — BONUS MULTIPLIERS</h3>
          <p><strong>The Reuse Multiplier:</strong></p>
          <ul>
            <li>1st reuse = base point value doubles.</li>
            <li>2nd reuse = point value doubles again (max).</li>
            <li>Point value remains maxed at the 2nd reuse value.</li>
          </ul>

          <p><strong>Length Multiplier (starting at the 5th tile in a word):</strong></p>
          <ul>
            <li>5th = ×3</li>
            <li>6th = ×4</li>
            <li>7th = ×5</li>
            <li>8th = ×6</li>
            <li>9th = ×7</li>
            <li>10th+ = ×10</li>
          </ul>
        </section>

        <!-- PAGE 4 — Phrase Panel / Anagram Bonus -->
        <section class="howto-page" data-page="3" hidden>
          <h3 style="margin:0 0 8px;">PAGE 4 — PHRASE PANEL / ANAGRAM BONUS</h3>
          <p>ANAGRAM / PHRASE PAIR BONUS: .</p>
        </section>
      </div>

      <!-- Pager controls -->
      <div style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
        <div id="howto-dots" aria-label="Pages" style="display:flex; gap:6px;">
          <button class="howto-dot" data-dot="0" aria-label="Page 1" type="button"></button>
          <button class="howto-dot" data-dot="1" aria-label="Page 2" type="button"></button>
          <button class="howto-dot" data-dot="2" aria-label="Page 3" type="button"></button>
          <button class="howto-dot" data-dot="3" aria-label="Page 4" type="button"></button>
        </div>
        <div class="rom__actions" style="margin-left:auto;">
          <button id="howto-prev" aria-label="Previous" type="button">Back</button>
          <button id="howto-next" aria-label="Next" type="button">Next</button>
          <button id="howto-close" type="button">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts (at end for better performance) -->
  <script type="module" src="./main.js"></script>
  <script type="module" src="./roundOverModal.js"></script>
  <script type="module" src="./howToModal.js"></script>
</body>
</html>
