/* =========================================
   Theme Variables and Palettes
   ========================================= */

/* Base variable set (Light Mode defaults) */
:root {
  --bg: #f8f8f8;
  --bg-2: #dcdcdc;
  --text: #1a1a1a;

  --btn-bg: #ffffff;
  --btn-fg: #111111;
  --btn-border: #888888;

  --panel-bg: #222222;
  --panel-text: #ffffff;

  --grid-line: #d0d4d8;

  --title-fill: hsl(210, 25%, 65%);
  --title-stroke: hsl(210, 25%, 26%);
  --title-shadow: rgba(0, 0, 0, 0.4);
  --title-stroke-width: 2px;

  --howto-color: #000000;

  --neon: #00e5ff;
  --neon-2: #6a00ff;

  --tile-cream: #fff1e6;
  --tile-text: #1b4965;
  --tile-border: #000000;
  --tile-shadow: rgba(0, 0, 0, 0.2);
  --tile-shadow-hover: rgba(0, 0, 0, 0.25);
  --tile-shadow-press: rgba(0, 0, 0, 0.2);
  --tile-cream-hover: #ffe7d5;

  --scrollbar-thumb-1: #00e5ff;
  --scrollbar-thumb-2: #6a00ff;
  --scrollbar-thumb-shadow: rgba(0, 229, 255, 0.6);
  --scrollbar-thumb-hover-shadow: rgba(106, 0, 255, 0.8);

  --side-toggle-bg: #2b2b2b;
  --side-toggle-fg: #f2f2f2;
  --side-toggle-hover-bg: #1f1f1f;
  --side-toggle-active-bg: #111111;
  --side-toggle-border: #444444;
  --side-toggle-shadow: rgba(0, 0, 0, 0.4);

  --rp-bg-1: rgba(0, 255, 166, 0.2);
  --rp-bg-2: rgba(0, 229, 255, 0.2);
  --rp-bg-3: rgba(0, 255, 230, 0.15);
  --rp-border: rgba(0, 229, 255, 0.5);
  --rp-shadow-outer: rgba(0, 255, 166, 0.6);
  --rp-shadow-inner: rgba(0, 229, 255, 0.3);

  --wordcount-bg-1: var(--neon);
  --wordcount-bg-2: var(--neon-2);
  --wordcount-fg: #ffffff;
  --wordcount-shadow: rgba(0, 0, 0, 0.6);

  --stage-outline: #000000;

  --reuse-1-fill: #fff1e6;
  --reuse-1-text: #b3002d;
  --reuse-1-ring-fill: #b3002d;
  --reuse-1-ring-stroke: #ff5d8f;

  --reuse-2-fill: #ff5d8f;
  --reuse-2-text: #ffffff;
  --reuse-2-ring-fill: #b3002d;
  --reuse-2-ring-stroke: #ff5d8f;

  --reuse-3-fill: #ff5d8f;
  --reuse-3-text: #4a0000;
  --reuse-3-ring-fill: #06d6a0;
  --reuse-3-ring-stroke: #024b36;

  --tile-fill: #fff1e6;
  --tile-stroke: #000000;
  --letter-fill: #1b4965;

  --hover-hex-fill: #222222;
  --hover-hex-stroke: #ffcc00;
  --hover-letter: #ffcc00;

  --selected-fill: #4cc9f0;
  --selected-stroke: #000000;

  --submit-fg: #1b4965;
  --submit-hover-fg: #4cc9f0;

  --alert-backdrop-1: rgba(255, 255, 255, 0.08);
  --alert-backdrop-2: rgba(0, 0, 0, 0.85);
  --alert-box-grad-1: rgba(20, 20, 35, 0.96);
  --alert-box-grad-2: rgba(35, 10, 45, 0.96);
  --alert-box-border: rgba(255, 120, 180, 0.7);
  --alert-box-shadow-1: rgba(255, 255, 255, 0.06);
  --alert-box-shadow-2: rgba(0, 0, 0, 0.7);
  --alert-box-shadow-3: rgba(255, 60, 140, 0.55);
  --alert-fg: #fef5ff;

  --alert-ok-grad-1: #ffe6ff;
  --alert-ok-grad-2: #ff3c8c;
  --alert-ok-fg: #240014;
  --alert-ok-shadow-1: rgba(255, 255, 255, 0.4);
  --alert-ok-shadow-2: rgba(0, 0, 0, 0.7);
  --alert-ok-shadow-hover-1: rgba(255, 255, 255, 0.7);
  --alert-ok-shadow-hover-2: rgba(0, 0, 0, 0.9);
  --alert-ok-shadow-active-2: rgba(0, 0, 0, 0.8);

  --panel-border: #ccc;

  /* New: ring width and dash pattern variables + optional letter stroke */
  --reuse-ring-width: 2px;
  --reuse-1-ring-dash: none;
  --reuse-2-ring-dash: none;
  --reuse-3-ring-dash: none;

  --letter-stroke-color: transparent;
  --letter-stroke-width: 0px;
}

/* Dark theme overrides */
body[data-theme="dark"] {
  --bg: #0f1115;
  --bg-2: #0b0d11;
  --text: #e7e9ee;

  --btn-bg: #1a2029;
  --btn-fg: #e7e9ee;
  --btn-border: #2a3240;

  --panel-bg: #141820;
  --panel-text: #e7e9ee;

  --grid-line: #323b46;

  --title-fill: #bcd2ea;
  --title-stroke: #3a4a5a;
  --title-shadow: rgba(0, 0, 0, 0.55);

  --howto-color: #e7e9ee;

  --tile-fill: #1a2029;
  --tile-stroke: #e7e9ee;
  --letter-fill: #e7e9ee;

  --reuse-1-fill: #1a2029;
  --reuse-1-text: #ff6b8a;
  --reuse-1-ring-fill: #ff3b73;
  --reuse-1-ring-stroke: #ff6b8a;

  --reuse-2-fill: #ff6b8a;
  --reuse-2-text: #0b0d11;
  --reuse-2-ring-fill: #e73462;
  --reuse-2-ring-stroke: #ff6b8a;

  --reuse-3-fill: #ff6b8a;
  --reuse-3-text: #0b0d11;
  --reuse-3-ring-fill: #06d6a0;
  --reuse-3-ring-stroke: #035941;

  --hover-hex-fill: #1a1a1a;
  --hover-hex-stroke: #ffcc00;
  --hover-letter: #ffcc00;

  --selected-fill: #4cc9f0;
  --selected-stroke: #e7e9ee;

  --submit-fg: #e7e9ee;
  --submit-hover-fg: #4cc9f0;

  --alert-backdrop-1: rgba(255, 255, 255, 0.04);
  --alert-backdrop-2: rgba(0, 0, 0, 0.8);
  --alert-box-grad-1: rgba(15, 15, 25, 0.96);
  --alert-box-grad-2: rgba(30, 10, 40, 0.96);
  --alert-box-border: rgba(255, 120, 180, 0.6);
  --alert-box-shadow-1: rgba(255, 255, 255, 0.04);
  --alert-box-shadow-2: rgba(0, 0, 0, 0.65);
  --alert-box-shadow-3: rgba(255, 60, 140, 0.5);
  --alert-fg: #fef5ff;

  --alert-ok-grad-1: #ffe6ff;
  --alert-ok-grad-2: #ff3c8c;
  --alert-ok-fg: #240014;
  --alert-ok-shadow-1: rgba(255, 255, 255, 0.35);
  --alert-ok-shadow-2: rgba(0, 0, 0, 0.7);
  --alert-ok-shadow-hover-1: rgba(255, 255, 255, 0.6);
  --alert-ok-shadow-hover-2: rgba(0, 0, 0, 0.9);
  --alert-ok-shadow-active-2: rgba(0, 0, 0, 0.8);

  --panel-border: #3a3a3a;
}

/* Colorblind-friendly overrides */
body[data-accessibility="colorblind"] {
  --letter-fill: #111111;

  --reuse-1-text: #0077cc;
  --reuse-1-ring-fill: #005fa3;
  --reuse-1-ring-stroke: #3aa5ff;

  --reuse-2-fill: #3aa5ff;
  --reuse-2-text: #0b0d11;
  --reuse-2-ring-fill: #005fa3;
  --reuse-2-ring-stroke: #3aa5ff;

  --reuse-3-ring-fill: #ffd166;
  --reuse-3-ring-stroke: #7a5c00;
}

/* Dark + Colorblind (high-contrast tiles and reuse rings) */
body[data-theme="dark"][data-accessibility="colorblind"] {
  /* Base tile + letters */
  --tile-fill: #11161f;            /* dark tile */
  --tile-stroke: #ffffff;          /* bright outline */
  --letter-fill: #ffffff;          /* white letters */
  --letter-stroke-color: #000000;  /* thin dark outline for legibility */
  --letter-stroke-width: 0.5px;

  /* Reuse 1: cyan */
  --reuse-1-fill: #11161f;
  --reuse-1-text: #00b4d8;
  --reuse-1-ring-fill: #00b4d8;
  --reuse-1-ring-stroke: #00e5ff;

  /* Reuse 2: yellow */
  --reuse-2-fill: #11161f;
  --reuse-2-text: #ffd166;
  --reuse-2-ring-fill: #ffd166;
  --reuse-2-ring-stroke: #ffe66d;

  /* Reuse 3: magenta/red */
  --reuse-3-fill: #11161f;
  --reuse-3-text: #ff6b6b;
  --reuse-3-ring-fill: #ff6b6b;
  --reuse-3-ring-stroke: #ffb3c1;

  /* Make stages visually distinct by pattern too */
  --reuse-ring-width: 2.5px;
  --reuse-1-ring-dash: 3 3;   /* dotted */
  --reuse-2-ring-dash: 7 3;   /* dashed */
  --reuse-3-ring-dash: none;  /* solid */
}

/* High Contrast Mode (independent layer) */
body[data-contrast="high"] {
  --bg: #ffffff;
  --bg-2: #ffffff;
  --text: #000000;

  --btn-bg: #ffffff;
  --btn-fg: #000000;
  --btn-border: #000000;

  --panel-bg: #ffffff;
  --panel-text: #000000;
  --panel-border: #000000;

  --grid-line: #00000020;

  --title-fill: #000000;
  --title-stroke: #000000;
  --title-shadow: rgba(0,0,0,0.25);

  --tile-fill: #ffffff;
  --tile-stroke: #000000;
  --letter-fill: #000000;

  --reuse-1-fill: #ffffff;
  --reuse-1-text: #000000;
  --reuse-1-ring-fill: #000000;
  --reuse-1-ring-stroke: #000000;

  --reuse-2-fill: #ffffff;
  --reuse-2-text: #000000;
  --reuse-2-ring-fill: #000000;
  --reuse-2-ring-stroke: #000000;

  --reuse-3-fill: #000000;
  --reuse-3-text: #ffffff;
  --reuse-3-ring-fill: #000000;
  --reuse-3-ring-stroke: #000000;

  --hover-hex-fill: #000000;
  --hover-hex-stroke: #000000;
  --hover-letter: #ffffff;

  --selected-fill: #3a3a3a;
  --selected-stroke: #000000;

  --submit-fg: #000000;
  --submit-hover-fg: #000000;

  --neon: #000000;
  --neon-2: #333333;

  --wordcount-bg-1: #000000;
  --wordcount-bg-2: #000000;
  --wordcount-fg: #ffffff;
  --wordcount-shadow: rgba(0,0,0,0.8);

  --alert-backdrop-1: rgba(255,255,255,0.15);
  --alert-backdrop-2: rgba(0,0,0,0.85);
  --alert-box-grad-1: #ffffff;
  --alert-box-grad-2: #ffffff;
  --alert-box-border: #000000;
  --alert-box-shadow-1: rgba(0,0,0,0.2);
  --alert-box-shadow-2: rgba(0,0,0,0.4);
  --alert-box-shadow-3: rgba(0,0,0,0.6);
  --alert-fg: #000000;

  --alert-ok-grad-1: #ffffff;
  --alert-ok-grad-2: #ffffff;
  --alert-ok-fg: #000000;
  --alert-ok-shadow-1: rgba(0,0,0,0.3);
  --alert-ok-shadow-2: rgba(0,0,0,0.6);
  --alert-ok-shadow-hover-1: rgba(0,0,0,0.6);
  --alert-ok-shadow-hover-2: rgba(0,0,0,0.8);
  --alert-ok-shadow-active-2: rgba(0,0,0,0.7);

  /* Stronger cues in high-contrast: thicker rings, simple patterns */
  --reuse-ring-width: 3px;
  --reuse-1-ring-dash: 2 3;  /* dotted */
  --reuse-2-ring-dash: 6 3;  /* dashed */
  --reuse-3-ring-dash: none; /* solid */
  --letter-stroke-color: #ffffff;
  --letter-stroke-width: 0px; /* keep 0 unless on dark tile */
}

/* Combined: High Contrast + Colorblind (most explicit cues) */
body[data-accessibility="colorblind"][data-contrast="high"] {
  /* Maintain the black/white foundations from high contrast */
  --bg: #ffffff;
  --bg-2: #ffffff;
  --text: #000000;

  --tile-fill: #ffffff;
  --tile-stroke: #000000;
  --letter-fill: #000000;

  /* Reuse fill/text keep max contrast; rings use distinct patterns */
  --reuse-1-fill: #ffffff;
  --reuse-1-text: #000000;
  --reuse-1-ring-fill: #000000;
  --reuse-1-ring-stroke: #000000;

  --reuse-2-fill: #ffffff;
  --reuse-2-text: #000000;
  --reuse-2-ring-fill: #000000;
  --reuse-2-ring-stroke: #000000;

  --reuse-3-fill: #000000;  /* invert for strongest distinction */
  --reuse-3-text: #ffffff;
  --reuse-3-ring-fill: #000000;
  --reuse-3-ring-stroke: #000000;

  /* Ring styling: size + patterns */
  --reuse-ring-width: 3px;
  --reuse-1-ring-dash: 1 3;  /* more dotted */
  --reuse-2-ring-dash: 6 2;  /* longer dash */
  --reuse-3-ring-dash: none; /* solid */

  /* Add readable outline to letters when on dark tiles (reuse-3) */
  --letter-stroke-color: #ffffff;
  --letter-stroke-width: 0.6px;
}

/* =========================================
   Theme Controls
   ========================================= */
#theme-controls {
  position: fixed;
  top: 8px;
  left: 8px;
  display: flex;
  gap: 8px;
  z-index: 960;
}
#theme-controls button {
  background: var(--btn-bg);
  color: var(--btn-fg);
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  padding: 6px 10px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
}
#theme-controls button:hover { filter: brightness(1.08); }

/* =========================================
   Global
   ========================================= */
html, body {
  margin: 0;
  padding: 0;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  font-family: 'Segoe UI', sans-serif;
}
body {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background: linear-gradient(to right, var(--bg), var(--bg-2));
  color: var(--text);
}

/* Title */
#game-title {
  font-family: 'Rubik+Vinyl';
  font-size: clamp(4.1rem, 7vw, 5.1rem);
  letter-spacing: 0.08em;
  color: var(--title-fill);
  -webkit-text-stroke: var(--title-stroke-width) var(--title-stroke);
  text-shadow: 0 2px 6px var(--title-shadow);
  position: fixed;
  top: 4px;
  left: 50%;
  transform: translateX(-50%);
  user-select: none;
  pointer-events: none;
  z-index: 900;
  margin: 0;
}



/* Grid Container */
#hex-grid { touch-action: none; }
#game-container {
  flex: 1;
  height: 100vh;
  overflow: hidden;
  position: relative;
  background-color: var(--bg);
  background-image:
    linear-gradient(var(--grid-line) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
  background-size: 40px 40px;
  background-position: center;
}

/* Backdrop */
#backdrop {
  position: fixed;
  inset: 0;
  z-index: 950;
  opacity: 0;
  pointer-events: none;
  transition: opacity 160ms ease;
}
body.panel-open #backdrop { opacity: 1; pointer-events: auto; }

/* Panels */
#left-panel, #right-panel {
  width: 300px;
  background: transparent;
  color: #fff;
  padding: 0px;
  transition: transform 0.3s ease;
  position: fixed;
  top: 0;
  bottom: 0;
  overflow-y: auto;
  z-index: 1000;
}
#left-panel { left: 0; transform: translateX(-100%); }
#right-panel { right: 0; transform: translateX(100%); }
#left-panel.open { transform: translateX(0); }
#right-panel.open { transform: translateX(0); }

/* Right Panel Content */
#right-panel .panel-content {
  position: absolute;
  inset: 0;
  overflow-y: auto;
  background:
    radial-gradient(circle at 20% 30%, var(--rp-bg-1), transparent 70%),
    radial-gradient(circle at 80% 70%, var(--rp-bg-2), transparent 70%),
    radial-gradient(circle at center, var(--rp-bg-3), transparent 80%);
  border: 2px solid var(--rp-border);
  border-radius: 14px;
  box-shadow:
    0 0 12px var(--rp-shadow-outer),
    inset 0 0 20px var(--rp-shadow-inner);
  padding: 18px;
  color: var(--panel-text);
}

/* Right Panel Heading */
#right-panel .panel-content h2 {
  font-size: 1.8em;
  text-align: center;
  margin-bottom: 98px;
  background: linear-gradient(90deg, var(--neon), var(--neon-2), #e9fff7, var(--neon));
  background-size: 300% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow:
    0 0 2px rgba(0, 255, 200, 0.6),
    0 0 6px rgba(0, 229, 255, 0.4);
  -webkit-text-stroke: 0.4px rgba(233, 255, 247, 0.3);
  font-weight: 800;
}

/* Right Panel HR */
#right-panel .panel-content hr {
  height: 2px;
  border: none;
  background: linear-gradient(90deg, transparent, var(--neon), var(--neon-2), transparent);
  background-size: 200% auto;
}

/* Right Panel Buttons */
#right-panel button {
  background: transparent;
  border: 2px solid var(--neon-2);
  border-radius: 8px;
  color: var(--text);
  font-weight: bold;
  text-shadow: 0 0 6px var(--neon-2);
  box-shadow: inset 0 0 8px var(--neon), 0 0 12px rgba(0, 229, 255, 0.5);
}
#right-panel button:hover {
  transform: translateY(-2px);
  box-shadow: inset 0 0 14px var(--neon-2), 0 0 16px rgba(0, 255, 166, 0.7);
}

/* Word count chip */
#wordcount-hint {
  background: linear-gradient(90deg, var(--wordcount-bg-1), var(--wordcount-bg-2));
  color: var(--wordcount-fg);
  font-weight: bold;
  padding: 6px 12px;
  border-radius: 8px;
  text-shadow: 0 0 6px var(--wordcount-shadow);
  box-shadow: 0 0 12px rgba(0,229,255,0.6);
}

/* Left Panel Content */
#left-panel .panel-content {
  position: absolute;
  inset: 0;
  overflow-y: auto;
  background: #f2f2f2;
  border: 1px solid var(--panel-border);
  border-radius: 10px;
  box-shadow: none;
  color: #222;
  padding: 18px;
}
#left-panel .panel-content::before {
  content: "";
  position: absolute; inset: -40%;
  background: conic-gradient(from 0deg,
    rgba(0, 238, 255, 0.10),
    rgba(106, 0, 255, 0.10),
    rgba(0, 238, 255, 0.10));
  pointer-events: none;
}
#left-panel .panel-content h2 {
  margin: 0 0 12px;
  text-align: center;
  font-size: 1.6em;
  background: linear-gradient(90deg, #00e5ff, #6a00ff, #00e5ff);
  background-size: 250% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 10px rgba(0, 229, 255, 0.8);
}

/* Word list styles */
#word-list {
  list-style: none;
  margin: 10px 0 14px;
  padding: 0;
  display: grid;
  gap: 8px;
}
#merged-list {
  list-style: none;
  margin: 0;
  padding: 0;
}
#word-list li, #merged-list li {
  padding: 8px 10px;
  border-radius: 10px;
  border: 2px solid var(--tile-border);
  background: var(--tile-cream);
  color: var(--tile-text);
  font-weight: 800;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  box-shadow: 0 2px 0 var(--tile-shadow);
  transition: background 0.15s ease, transform 0.1s ease;
}
#word-list li:hover, #merged-list li:hover {
  background: var(--tile-cream-hover);
  transform: translateY(-1px);
}

/* Word list buttons */
#word-list button {
  margin-left: 6px;
  padding: 2px 6px;
  border: 1px solid #444;
  background: #f2f2f2;
  color: #222;
  font-weight: 600;
  font-size: 0.85em;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 2px 0 rgba(0,0,0,0.15);
  transition: background 0.15s ease, transform 0.1s ease;
}
#word-list button:hover { background: #e0e0e0; transform: scale(1.05); }
#word-list button:active { transform: scale(0.96); }

/* Submit list button */
#submit-list {
  display: block;
  margin: 6px auto 0;
  padding: 10px 14px;
  background: var(--tile-cream);
  border: 2px solid var(--tile-border);
  border-radius: 10px;
  color: var(--tile-text);
  font-weight: 800;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  cursor: pointer;
  box-shadow: 0 2px 0 var(--tile-shadow);
  transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease;
}
#submit-list:hover {
  background: var(--tile-cream-hover);
  transform: translateY(-1px);
  box-shadow: 0 3px 0 var(--tile-shadow-hover);
}
#submit-list:active {
  transform: translateY(0);
  box-shadow: 0 1px 0 var(--tile-shadow-press);
}

/* Panel actions */
#left-panel .panel-actions { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-top: 8px; }
#left-panel #submit-list { margin: 0; }

/* New game button */
#left-panel #new-game {
  padding: 10px 14px;
  background: var(--tile-cream);
  border: 2px solid var(--tile-border);
  border-radius: 10px;
  color: var(--tile-text);
  font-weight: 800;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  cursor: pointer;
  box-shadow: 0 2px 0 var(--tile-shadow);
  transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease;
}
#left-panel #new-game:hover {
  background: var(--tile-cream-hover);
  transform: translateY(-1px);
  box-shadow: 0 3px 0 var(--tile-shadow-hover);
}
#left-panel #new-game:active {
  transform: translateY(0);
  box-shadow: 0 1px 0 var(--tile-shadow-press);
}

/* Focus visible */
#left-panel #submit-list:focus-visible,
#left-panel #new-game:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 3px rgba(0,229,255,0.5),
    0 0 18px rgba(106, 0, 255, 0.5);
}

/* Side toggles */
.side-toggle {
  position: fixed;
  top: 95px;
  transform: none;
  padding: 12px 8px;
  border-radius: 6px;
  border: 1px solid var(--side-toggle-border);
  background: var(--side-toggle-bg);
  color: var(--side-toggle-fg);
  cursor: pointer;
  height: 140px;
  width: 56px;
  z-index: 1200;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
  white-space: nowrap;
  gap: 3px;
  text-shadow: none;
  box-shadow: 0 2px 6px var(--side-toggle-shadow);
  transition:
    background 0.2s ease,
    transform 0.1s ease,
    left 0.45s ease,
    right 0.45s ease;
}
.vword { writing-mode: vertical-rl; text-orientation: upright; display: inline-block; line-height: 1; letter-spacing: 0; margin: 0 1px; font-size: 1.4rem; }
.side-toggle:hover { background: var(--side-toggle-hover-bg); transform: scale(1.02); }
.side-toggle:active { background: var(--side-toggle-active-bg); transform: scale(0.98); }
.left-toggle { left: 0px; border-top-left-radius: 0; border-bottom-left-radius: 0; }
.right-toggle { right: 0px; border-top-right-radius: 0; border-bottom-right-radius: 0; }
body.left-open .left-toggle { left: -60px; }
body.right-open .right-toggle { right: -60; }

/* Merged words section */
#merged-words-wrap { margin-top: 12px; }
#merged-scroll { overflow-y: auto; padding: 8px 0; flex: 1 1 auto; min-height: 0; }
#merged-list li:hover { background: var(--tile-cream-hover); transform: translateY(-1px); }
.is-hidden { display: none !important; }

#merged-words-wrap .merged__summary { cursor: pointer; font-weight: 700; }

#merged-words-wrap .merged__totals {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
  margin: 8px 0 10px;
}
#merged-words-wrap .totals__item {
  padding: 8px 10px;
  border-radius: 10px;
  border: 2px solid var(--tile-border);
  background: var(--tile-cream);
  color: var(--tile-text);
  box-shadow: 0 2px 0 var(--tile-shadow);
}
#merged-words-wrap .totals__label { font-size: 12px; opacity: 0.8; margin-bottom: 4px; }
#merged-words-wrap .totals__value { font-weight: 800; font-size: 20px; letter-spacing: .02em; }

#merged-words-wrap .merged__scores {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}
#merged-words-wrap .scores__col h4 { margin: 0 0 6px; font-size: 13px; letter-spacing: .02em; opacity: 0.9; }
#merged-words-wrap .scores__list {
  list-style: none;
  margin: 0;
  padding: 8px 10px;
  max-height: 160px;
  overflow-y: auto;
  border-radius: 10px;
  border: 1px solid var(--tile-border);
  background: var(--tile-cream);
  color: var(--tile-text);
  box-shadow: 0 2px 0 rgba(0,0,0,0.12);
}
#merged-words-wrap .merged__actions { margin-top: 8px; display: flex; gap: 8px; flex-wrap: wrap; }
#merged-words-wrap .btn {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid rgba(0, 238, 255, 0.45);
  background: rgba(10, 16, 26, 0.9);
  box-shadow:
    0 0 8px rgba(0, 238, 255, 0.35),
    inset 0 0 10px rgba(0, 180, 255, 0.15);
  font-weight: 600;
}
#merged-words-wrap .merged__scroll.panel-content {
  max-height: 260px;
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  border-radius: 14px;
  padding: 6px 10px 10px;
}
#merged-words-wrap .merged__list { list-style: none; margin: 0; padding: 0; }
#merged-words-wrap .merged__item {
  margin: 6px 0;
  padding: 8px 10px;
  border-radius: 10px;
  border: 2px solid var(--tile-border);
  background: var(--tile-cream);
  color: var(--tile-text);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  box-shadow: 0 2px 0 var(--tile-shadow);
  transition: background 0.15s ease, transform 0.1s ease;
}
#merged-words-wrap .merged__item:hover { background: var(--tile-cream-hover); transform: translateY(-1px); }
#merged-words-wrap .merged__item.is-yours {
  border-color: #ffb700;
  background: #1a1a1a;
  color: #ffcc33;
  font-weight: 700;
}
#merged-words-wrap .merged__item.is-yours:hover { background: #222; border-color: #ffd84d; }

#merged-words-wrap .merged__legend { margin-top: 8px; font-size: 12px; opacity: .85; }
#merged-words-wrap .tag {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 6px;
  font-weight: 700;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.15);
}
#merged-words-wrap .tag--yours { background: #7209d5; color: #222; }
#merged-words-wrap .merged__legend-text { margin-left: 8px; }

.remove-word[disabled] { opacity: 0.5; cursor: not-allowed; pointer-events: none; }
#left-panel:not(.is-merged) #new-game { display: none; }

/* Scrollbar */
#left-panel .panel-content { scrollbar-width: thin; scrollbar-color: #28f0ff20 transparent; }
#left-panel .panel-content::-webkit-scrollbar { width: 8px; }
#left-panel .panel-content::-webkit-scrollbar-track { background: transparent; }
#left-panel .panel-content::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--scrollbar-thumb-1), var(--scrollbar-thumb-2));
  border-radius: 6px;
  box-shadow: 0 0 6px var(--scrollbar-thumb-shadow);
}
#left-panel .panel-content::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, var(--scrollbar-thumb-2), var(--scrollbar-thumb-1));
  box-shadow: 0 0 10px var(--scrollbar-thumb-hover-shadow);
}

/* Base Tile and Text */
.hex-tile {
  fill: var(--tile-fill);
  stroke: var(--tile-stroke);
  stroke-width: 1.6px;
  shape-rendering: geometricPrecision;
  transition: transform 160ms ease-out;
}
.tile-letter, .tile-point {
  fill: var(--letter-fill);
  font-weight: 900;
  text-shadow: none;
  stroke: var(--letter-stroke-color);
  stroke-width: var(--letter-stroke-width);
  paint-order: stroke fill;
  user-select: none;
}

/* Hover states */
@media (hover: hover) and (pointer: fine) {
  .tile:hover .hex-tile {
    fill: var(--hover-hex-fill);
    stroke: var(--hover-hex-stroke);
    stroke-width: 2.5px;
    transition: fill 180ms ease, stroke 180ms ease, stroke-width 180ms ease;
  }
  .tile:hover .tile-letter, .tile:hover .tile-point {
    fill: var(--hover-letter);
    transition: fill 160ms ease;
  }
}

/* Reuse stages: rings now use dash/width variables */
.hex-tile.reuse-1 { fill: var(--reuse-1-fill); stroke: none; transform: scale(1); }
.tile-letter.reuse-1, .tile-point.reuse-1 { fill: var(--reuse-1-text); font-weight: 800; }
.tile:has(.hex-tile.reuse-1) path:first-child {
  fill: var(--reuse-1-ring-fill);
  stroke: var(--reuse-1-ring-stroke);
  stroke-dasharray: var(--reuse-1-ring-dash);
  stroke-width: var(--reuse-ring-width);
}

.hex-tile.reuse-2 { fill: var(--reuse-2-fill); stroke: none; transform: scale(1); }
.tile-letter.reuse-2, .tile-point.reuse-2 { fill: var(--reuse-2-text); font-weight: 800; }
.tile:has(.hex-tile.reuse-2) path:first-child {
  fill: var(--reuse-2-ring-fill);
  stroke: var(--reuse-2-ring-stroke);
  stroke-dasharray: var(--reuse-2-ring-dash);
  stroke-width: var(--reuse-ring-width);
}

.hex-tile.reuse-3 { fill: var(--reuse-3-fill); stroke: none; }
.tile-letter.reuse-3, .tile-point.reuse-3 { fill: var(--reuse-3-text); stroke: none; font-weight: 800; }
.tile:has(.hex-tile.reuse-3) path:first-child {
  fill: var(--reuse-3-ring-fill);
  stroke: var(--reuse-3-ring-stroke);
  stroke-dasharray: var(--reuse-3-ring-dash);
  stroke-width: var(--reuse-ring-width);
  transform-box: fill-box;
  transform-origin: center;
  transform: scale(1.11);
}

/* Selected tile */
.hex-tile.selected {
  fill: var(--selected-fill);
  stroke: var(--selected-stroke);
  stroke-width: 2px;
  transform-box: fill-box;
  transform-origin: center;
  transform: scale(1.04);
}
.tile-letter.selected, .tile-point.selected { fill: #000; }

/* Fonts & score */
.limelight-regular { font-family: "Limelight", sans-serif; font-weight: 400; font-style: normal; text-transform: uppercase; }
#score-display { font-family: "Limelight", sans-serif; font-size: clamp(2.8rem, 3vw, 2.8rem); text-transform: uppercase; }
#score-display {
  position: fixed;
  top: 100px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 800;
  display: block;
  font-size: 2.7rem;
  text-align: center;
}

.side-toggle,
#right-panel button,
#left-panel #submit-list,
#left-panel #new-game,
#submit-word,
#clear-word {
  font-family: "Coiny";
  font-weight: 400;
  font-style: normal;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: clamp(1rem, 2vw, 1.4rem);
}

/* Submit/Clear buttons (desktop layout) */
@media (min-width: 769px) {
  #submit-word, #clear-word {
    position: fixed;
    top: calc(40% + 200px);
    z-index: 800;
    display: block;
  }
  #submit-word { left: 50%; transform: translateX(-500px); }
  #clear-word { left: 50%; transform: translateX(265px); }
}

.freckle-face-regular { font-family: "Freckle Face", system-ui; font-weight: 400; font-style: normal; }

@media (min-width: 769px) {
  #current-word-display {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    top: calc(50% + 290px);
    z-index: 800;
    display: block;
    text-align: center;
    font-size: 2.9rem;
    font-family: "Notable", sans-serif;
    text-transform: uppercase;
  }
}

#submit-word, #clear-word {
  position: fixed;
  top: calc(50% + 140px);
  z-index: 900;
  width: auto;
  height: auto;
  clip-path: none;
  background: none;
  border: none;
  box-shadow: none;
  font-family: "Notable";
  font-weight: 900;
  font-size: 2.6rem;
  text-transform: uppercase;
  color: var(--submit-fg);
  padding: 10px 18px;
  cursor: pointer;
  transition: transform 120ms ease, color 120ms ease;
}
#submit-word:hover, #clear-word:hover { color: var(--submit-hover-fg); }

/* Puff animation */
.puff-out-hor { animation: puff-out-hor 1.3s cubic-bezier(0.165, 0.840, 0.440, 1.000) both; }
@keyframes puff-out-hor {
  0% { transform: scale(4); filter: blur(0px); opacity: 1; }
  100% { transform: scale(5); filter: blur(4px); opacity: 0; }
}

/* Alert modal */
.alert-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  background: radial-gradient(circle at top, var(--alert-backdrop-1), var(--alert-backdrop-2));
  backdrop-filter: blur(6px);
  opacity: 1;
  transition: opacity 180ms ease-out;
}
.alert-modal.hidden { opacity: 0; pointer-events: none; }
.alert-box {
  position: relative;
  max-width: 360px;
  width: calc(100% - 40px);
  padding: 18px 22px 20px;
  border-radius: 18px;
  background: linear-gradient(135deg, var(--alert-box-grad-1), var(--alert-box-grad-2));
  border: 2px solid var(--alert-box-border);
  box-shadow:
    0 0 0 1px var(--alert-box-shadow-1),
    0 12px 30px var(--alert-box-shadow-2),
    0 0 25px var(--alert-box-shadow-3);
  color: var(--alert-fg);
  text-align: center;
  font-family: "Turret Road", system-ui, sans-serif;
  animation: alert-pop 180ms ease-out;
}
.alert-box::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(to bottom, rgba(255, 180, 255, 0.35), transparent 45%);
  opacity: 0.8;
  pointer-events: none;
}
#alert-text { position: relative; margin: 0; padding: 6px 4px 2px; font-size: 18px; line-height: 1.4; letter-spacing: 0.03em; }
#alert-ok {
  position: relative;
  margin-top: 16px;
  padding: 8px 26px;
  border-radius: 999px;
  border: 0;
  cursor: pointer;
  font-size: 15px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-family: inherit;
  background: radial-gradient(circle at 20% 0%, var(--alert-ok-grad-1), var(--alert-ok-grad-2));
  color: var(--alert-ok-fg);
  box-shadow:
    0 0 0 1px var(--alert-ok-shadow-1),
    0 6px 16px var(--alert-ok-shadow-2);
  transition: transform 80ms ease-out, box-shadow 80ms ease-out, filter 80ms ease-out;
}
#alert-ok:hover {
  transform: translateY(-1px);
  box-shadow:
    0 0 0 1px var(--alert-ok-shadow-hover-1),
    0 10px 22px var(--alert-ok-shadow-hover-2);
  filter: brightness(1.05);
}
#alert-ok:active {
  transform: translateY(1px) scale(0.98);
  box-shadow:
    0 0 0 1px var(--alert-ok-shadow-1),
    0 4px 10px var(--alert-ok-shadow-active-2);
}
@keyframes alert-pop { from { transform: translateY(8px) scale(0.95); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }

/* Mobile tweaks for title size */
@media (max-width: 768px) {
  #game-title {
    position: fixed;
    top: 4px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 800;
    margin: 0;
    font-size: 2.7rem;
    letter-spacing: 0.04em;
  }
}

/* Settings Dropdown */
#settings-wrap {
  position: fixed;
  top: 5px;        /* same as old how-to button */
  right: 8px;      /* same as old how-to button */
  z-index: 800;
}

#settings-btn {
  font-size: 1.7rem;
  background: var(--btn-bg);
  color: var(--btn-fg);
  border: 1px solid var(--btn-border);
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}

#settings-menu {
  position: fixed;
  top: 42px;
  right: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;

  background: var(--panel-bg);
  color: var(--panel-text);
  border: 1px solid var(--panel-border);
  border-radius: 10px;
  padding: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}

#settings-menu button {
  background: var(--btn-bg);
  border: 1px solid var(--btn-border);
  color: var(--btn-fg);
  font-weight: 600;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
}

#settings-menu button:hover {
  filter: brightness(1.08);
}

#settings-menu[hidden] {
  display: none !important;
}

/* MOBILE — move the gear under the title */
@media (max-width: 768px) {
  #settings-wrap {
    top: 58px;            /* under the ANAGRAMATON title */
    right: 200px;
    left: auto;
  }
}

/* MOBILE — make ONLY the gear icon smaller */
@media (max-width: 768px) {
  #settings-btn {
    font-size: 1.2rem;
    padding: 4px 6px;
  }
}

/* MOBILE — make menu horizontal AND position it to the right of the gear */
@media (max-width: 768px) {
  #settings-menu {
    position: absolute;
    top: 0;
    left: calc(100% + 8px);   /* menu sits to the right of the gear */
    right: auto;

    display: flex;
    flex-direction: row;      /* horizontal */
    gap: 8px;
  }

  #settings-menu > button {
    width: auto;
    padding: 4px 6px;
    white-space: nowrap;
  }
}



